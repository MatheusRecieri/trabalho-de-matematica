<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Matem√°tica - Trabalho</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #fff;
        }

        .header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(0,0,0,0.3);
            border-bottom: 2px solid #e94560;
        }

        .header h1 {
            font-size: 2.5rem;
            color: #e94560;
            margin-bottom: 10px;
        }

        .header p {
            color: #aaa;
            font-size: 1.1rem;
        }

        .nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav button {
            padding: 12px 24px;
            background: transparent;
            border: 2px solid #e94560;
            color: #e94560;
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .nav button:hover, .nav button.active {
            background: #e94560;
            color: #fff;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(233, 69, 96, 0.4);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: rgba(255,255,255,0.05);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
        }

        .card h2 {
            color: #e94560;
            margin-bottom: 10px;
            font-size: 1.8rem;
        }

        .card h3 {
            color: #00d9ff;
            margin: 20px 0 10px 0;
            font-size: 1.2rem;
        }

        .card p.desc {
            color: #aaa;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .formula {
            background: rgba(0,217,255,0.1);
            border-left: 4px solid #00d9ff;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
            font-family: 'Courier New', monospace;
            color: #00d9ff;
        }

        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .input-item {
            display: flex;
            flex-direction: column;
        }

        .input-item label {
            color: #aaa;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .input-item input {
            padding: 12px 15px;
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 10px;
            background: rgba(255,255,255,0.05);
            color: #fff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .input-item input:focus {
            outline: none;
            border-color: #e94560;
            box-shadow: 0 0 15px rgba(233, 69, 96, 0.3);
        }

        .btn {
            padding: 14px 35px;
            background: linear-gradient(135deg, #e94560, #ff6b6b);
            border: none;
            border-radius: 30px;
            color: #fff;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(233, 69, 96, 0.4);
        }

        .resultado {
            margin-top: 30px;
            padding: 25px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .resultado h4 {
            color: #00d9ff;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .resultado-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .resultado-item:last-child {
            border-bottom: none;
        }

        .resultado-item span:first-child {
            color: #aaa;
        }

        .resultado-item span:last-child {
            color: #00ff88;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }

        th {
            background: rgba(233, 69, 96, 0.3);
            color: #e94560;
            font-weight: bold;
        }

        td {
            color: #ddd;
            font-family: 'Courier New', monospace;
        }

        tr:nth-child(even) {
            background: rgba(255,255,255,0.03);
        }

        tr:hover {
            background: rgba(233, 69, 96, 0.1);
        }

        .error {
            color: #ff4757;
            background: rgba(255, 71, 87, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 71, 87, 0.3);
        }

        .grafico-container {
            margin-top: 20px;
            padding: 20px;
            background: rgba(0,0,0,0.4);
            border-radius: 15px;
            overflow-x: auto;
        }

        .grafico-ascii {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.2;
            white-space: pre;
            color: #00d9ff;
        }

        .legenda {
            margin-top: 15px;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .legenda-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legenda-cor {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .footer {
            text-align: center;
            padding: 30px;
            color: #666;
            border-top: 1px solid rgba(255,255,255,0.1);
            margin-top: 50px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
            }
            
            .nav button {
                padding: 10px 18px;
                font-size: 0.85rem;
            }
            
            .card {
                padding: 20px;
            }
            
            th, td {
                padding: 8px 5px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>

<div class="header">
    <h1>üìê Calculadora Matem√°tica</h1>
    <p>Sistema de C√°lculos Num√©ricos e Financeiros</p>
</div>

<nav class="nav">
    <button class="active" onclick="mostrarSecao('bissecao')">M√©todo da Bisse√ß√£o</button>
    <button onclick="mostrarSecao('reta')">Equa√ß√£o da Reta</button>
    <button onclick="mostrarSecao('irrf')">C√°lculo IRRF</button>
    <button onclick="mostrarSecao('juros')">Juros Compostos</button>
</nav>

<div class="container">

    <!-- SE√á√ÉO 1: M√âTODO DA BISSE√á√ÉO -->
    <section id="bissecao" class="section active">
        <div class="card">
            <h2>üìä M√©todo da Bisse√ß√£o</h2>
            <p class="desc">M√©todo num√©rico para encontrar ra√≠zes de fun√ß√µes cont√≠nuas. O algoritmo divide repetidamente um intervalo ao meio, convergindo para a raiz da fun√ß√£o.</p>
            
            <div class="formula">
                f(x) = x¬≥ - 9x + 3
            </div>

            <h3>Par√¢metros de Entrada</h3>
            <div class="input-group">
                <div class="input-item">
                    <label>X inicial (a):</label>
                    <input type="number" id="bis-a" step="0.01" value="0">
                </div>
                <div class="input-item">
                    <label>X final (b):</label>
                    <input type="number" id="bis-b" step="0.01" value="1">
                </div>
                <div class="input-item">
                    <label>Toler√¢ncia:</label>
                    <input type="number" id="bis-tol" step="0.0001" value="0.0001">
                </div>
                <div class="input-item">
                    <label>M√°x. Itera√ß√µes:</label>
                    <input type="number" id="bis-maxiter" value="20">
                </div>
            </div>

            <button class="btn" onclick="calcularBissecao()">Calcular Bisse√ß√£o</button>

            <div id="resultado-bissecao" class="resultado" style="display:none;"></div>
        </div>
    </section>

    <!-- SE√á√ÉO 2: EQUA√á√ÉO DA RETA -->
    <section id="reta" class="section">
        <div class="card">
            <h2>üìà Equa√ß√£o da Reta</h2>
            <p class="desc">Calcula a equa√ß√£o da reta que passa por dois pontos, encontrando o coeficiente angular (a), coeficiente linear (b) e os pontos de intercepta√ß√£o com os eixos.</p>
            
            <div class="formula">
                f(x) = ax + b &nbsp;&nbsp;|&nbsp;&nbsp; a = (y‚ÇÇ - y‚ÇÅ) / (x‚ÇÇ - x‚ÇÅ)
            </div>

            <h3>Ponto 1</h3>
            <div class="input-group">
                <div class="input-item">
                    <label>X‚ÇÅ:</label>
                    <input type="number" id="reta-x1" step="0.01" value="1">
                </div>
                <div class="input-item">
                    <label>Y‚ÇÅ:</label>
                    <input type="number" id="reta-y1" step="0.01" value="2">
                </div>
            </div>

            <h3>Ponto 2</h3>
            <div class="input-group">
                <div class="input-item">
                    <label>X‚ÇÇ:</label>
                    <input type="number" id="reta-x2" step="0.01" value="3">
                </div>
                <div class="input-item">
                    <label>Y‚ÇÇ:</label>
                    <input type="number" id="reta-y2" step="0.01" value="6">
                </div>
            </div>

            <button class="btn" onclick="calcularReta()">Calcular Equa√ß√£o</button>

            <div id="resultado-reta" class="resultado" style="display:none;"></div>
        </div>
    </section>

    <!-- SE√á√ÉO 3: C√ÅLCULO IRRF -->
    <section id="irrf" class="section">
        <div class="card">
            <h2>üí∞ C√°lculo do IRRF</h2>
            <p class="desc">Calcula o Imposto de Renda Retido na Fonte com base no sal√°rio bruto e n√∫mero de dependentes, utilizando a tabela progressiva vigente.</p>
            
            <div class="formula">
                IRRF = (Base de C√°lculo √ó Al√≠quota) - Dedu√ß√£o
            </div>

            <h3>Dados do Contribuinte</h3>
            <div class="input-group">
                <div class="input-item">
                    <label>Sal√°rio Bruto (R$):</label>
                    <input type="number" id="irrf-salario" step="0.01" value="5000">
                </div>
                <div class="input-item">
                    <label>N√∫mero de Dependentes:</label>
                    <input type="number" id="irrf-dependentes" step="1" min="0" value="0">
                </div>
            </div>

            <button class="btn" onclick="calcularIRRF()">Calcular IRRF</button>

            <div id="resultado-irrf" class="resultado" style="display:none;"></div>
        </div>

        <div class="card">
            <h2>üìã Tabela Progressiva do IR</h2>
            <table>
                <tr>
                    <th>Base de C√°lculo</th>
                    <th>Al√≠quota</th>
                    <th>Dedu√ß√£o</th>
                </tr>
                <tr>
                    <td>At√© R$ 2.259,20</td>
                    <td>Isento</td>
                    <td>-</td>
                </tr>
                <tr>
                    <td>R$ 2.259,21 a R$ 2.826,65</td>
                    <td>7,5%</td>
                    <td>R$ 169,44</td>
                </tr>
                <tr>
                    <td>R$ 2.826,66 a R$ 3.751,05</td>
                    <td>15%</td>
                    <td>R$ 381,44</td>
                </tr>
                <tr>
                    <td>R$ 3.751,06 a R$ 4.664,68</td>
                    <td>22,5%</td>
                    <td>R$ 662,77</td>
                </tr>
                <tr>
                    <td>Acima de R$ 4.664,68</td>
                    <td>27,5%</td>
                    <td>R$ 896,00</td>
                </tr>
            </table>
            <p style="color:#aaa; margin-top:15px; font-size:0.9rem;">* Dedu√ß√£o por dependente: R$ 189,59</p>
        </div>
    </section>

    <!-- SE√á√ÉO 4: JUROS COMPOSTOS -->
    <section id="juros" class="section">
        <div class="card">
            <h2>üìà Juros Compostos</h2>
            <p class="desc">Calcula o montante final de uma aplica√ß√£o com juros compostos, com ou sem aportes mensais. Compara tamb√©m com a infla√ß√£o (IPCA).</p>
            
            <div class="formula">
                M = C √ó (1 + i)·µó &nbsp;&nbsp;|&nbsp;&nbsp; Com Aportes: M = C√ó(1+i)·µó + A√ó[((1+i)·µó - 1)/i]
            </div>

            <h3>Dados da Aplica√ß√£o</h3>
            <div class="input-group">
                <div class="input-item">
                    <label>Capital Inicial (R$):</label>
                    <input type="number" id="juros-capital" step="0.01" value="10000">
                </div>
                <div class="input-item">
                    <label>Aporte Mensal (R$):</label>
                    <input type="number" id="juros-aporte" step="0.01" value="300">
                </div>
                <div class="input-item">
                    <label>Taxa de Juros (% ao m√™s):</label>
                    <input type="number" id="juros-taxa" step="0.01" value="1">
                </div>
                <div class="input-item">
                    <label>Taxa IPCA (% ao m√™s):</label>
                    <input type="number" id="juros-ipca" step="0.01" value="0.4">
                </div>
                <div class="input-item">
                    <label>Tempo (meses):</label>
                    <input type="number" id="juros-tempo" step="1" value="12">
                </div>
            </div>

            <button class="btn" onclick="calcularJuros()">Calcular Investimento</button>

            <div id="resultado-juros" class="resultado" style="display:none;"></div>
        </div>
    </section>

</div>

<footer class="footer">
    <p>Trabalho de Matem√°tica - Sistema de C√°lculos</p>
</footer>

<script>
// ============================================
// NAVEGA√á√ÉO
// ============================================
function mostrarSecao(id) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active'));
    
    document.getElementById(id).classList.add('active');
    event.target.classList.add('active');
}

// ============================================
// M√âTODO DA BISSE√á√ÉO
// ============================================
function funcaoBissecao(x) {
    return x*x*x - 9*x + 3;
}

function calcularBissecao() {
    let a = parseFloat(document.getElementById("bis-a").value);
    let b = parseFloat(document.getElementById("bis-b").value);
    let tolerancia = parseFloat(document.getElementById("bis-tol").value);
    let maxIter = parseInt(document.getElementById("bis-maxiter").value);

    let resultadoDiv = document.getElementById("resultado-bissecao");
    resultadoDiv.style.display = "block";

    if (funcaoBissecao(a) * funcaoBissecao(b) > 0) {
        resultadoDiv.innerHTML = `<div class="error">‚ö†Ô∏è Intervalo inv√°lido! f(a) √ó f(b) deve ser negativo para garantir a exist√™ncia de raiz.</div>`;
        return;
    }

    let html = `<h4>üìä Tabela de Itera√ß√µes</h4>
        <table>
            <tr>
                <th>i</th>
                <th>a</th>
                <th>x_m</th>
                <th>b</th>
                <th>f(a)</th>
                <th>f(x_m)</th>
                <th>f(b)</th>
                <th>Toler√¢ncia</th>
            </tr>`;

    let x_antigo = a;
    let raizEncontrada = 0;

    for (let i = 1; i <= maxIter; i++) {
        let x_m = (a + b) / 2;
        let f_a = funcaoBissecao(a);
        let f_m = funcaoBissecao(x_m);
        let f_b = funcaoBissecao(b);
        let toler = Math.abs(x_m - x_antigo);

        html += `
            <tr>
                <td>${i}</td>
                <td>${a.toFixed(6)}</td>
                <td>${x_m.toFixed(6)}</td>
                <td>${b.toFixed(6)}</td>
                <td>${f_a.toFixed(6)}</td>
                <td>${f_m.toFixed(6)}</td>
                <td>${f_b.toFixed(6)}</td>
                <td>${toler.toExponential(3)}</td>
            </tr>`;

        raizEncontrada = x_m;

        if (toler <= tolerancia) {
            html += `</table>
                <div class="resultado-item" style="margin-top:20px; background:rgba(0,255,136,0.1); padding:15px; border-radius:10px;">
                    <span>‚úÖ Raiz encontrada:</span>
                    <span style="font-size:1.2rem;">${x_m.toFixed(6)}</span>
                </div>
                <div class="resultado-item">
                    <span>Itera√ß√µes necess√°rias:</span>
                    <span>${i}</span>
                </div>`;
            break;
        }

        if (f_a * f_m < 0) {
            b = x_m;
        } else {
            a = x_m;
        }

        x_antigo = x_m;

        if (i === maxIter) {
            html += `</table>
                <div class="resultado-item" style="margin-top:20px; background:rgba(255,200,0,0.1); padding:15px; border-radius:10px;">
                    <span>‚ö†Ô∏è Melhor aproxima√ß√£o (m√°x. itera√ß√µes atingido):</span>
                    <span style="font-size:1.2rem;">${x_m.toFixed(6)}</span>
                </div>`;
        }
    }

    resultadoDiv.innerHTML = html;
}

// ============================================
// EQUA√á√ÉO DA RETA
// ============================================
function calcularReta() {
    let x1 = parseFloat(document.getElementById("reta-x1").value);
    let y1 = parseFloat(document.getElementById("reta-y1").value);
    let x2 = parseFloat(document.getElementById("reta-x2").value);
    let y2 = parseFloat(document.getElementById("reta-y2").value);

    let resultadoDiv = document.getElementById("resultado-reta");
    resultadoDiv.style.display = "block";

    if (x1 === x2) {
        resultadoDiv.innerHTML = `<div class="error">‚ö†Ô∏è A reta √© vertical (x‚ÇÅ = x‚ÇÇ) e n√£o pode ser expressa na forma f(x) = ax + b.</div>`;
        return;
    }

    const a = (y2 - y1) / (x2 - x1);
    const b = y1 - a * x1;
    const xIntercept = a !== 0 ? -b / a : null;
    const yIntercept = b;

    let funcaoStr = `f(x) = ${a.toFixed(4)}x`;
    if (b >= 0) {
        funcaoStr += ` + ${b.toFixed(4)}`;
    } else {
        funcaoStr += ` - ${Math.abs(b).toFixed(4)}`;
    }

    let html = `
        <h4>üìà Resultado da Equa√ß√£o</h4>
        <div class="formula" style="font-size:1.3rem; text-align:center; margin:20px 0;">
            ${funcaoStr}
        </div>
        <div class="resultado-item">
            <span>Coeficiente Angular (a):</span>
            <span>${a.toFixed(4)}</span>
        </div>
        <div class="resultado-item">
            <span>Coeficiente Linear (b):</span>
            <span>${b.toFixed(4)}</span>
        </div>
        <div class="resultado-item">
            <span>Intercepto no eixo X:</span>
            <span>${xIntercept !== null ? `(${xIntercept.toFixed(4)}, 0)` : 'N√£o existe (reta horizontal)'}</span>
        </div>
        <div class="resultado-item">
            <span>Intercepto no eixo Y:</span>
            <span>(0, ${yIntercept.toFixed(4)})</span>
        </div>
        <div class="resultado-item">
            <span>Ponto 1:</span>
            <span>(${x1}, ${y1})</span>
        </div>
        <div class="resultado-item">
            <span>Ponto 2:</span>
            <span>(${x2}, ${y2})</span>
        </div>
    `;

    resultadoDiv.innerHTML = html;
}

// ============================================
// C√ÅLCULO DO IRRF
// ============================================
function calcularIRRF() {
    let salarioBruto = parseFloat(document.getElementById("irrf-salario").value);
    let dependentes = parseInt(document.getElementById("irrf-dependentes").value) || 0;

    let resultadoDiv = document.getElementById("resultado-irrf");
    resultadoDiv.style.display = "block";

    const deducaoDependente = 189.59;
    let baseCalculo = salarioBruto - (dependentes * deducaoDependente);
    if (baseCalculo < 0) baseCalculo = 0;

    let aliquota = 0;
    let deducao = 0;
    let faixa = "";

    if (baseCalculo <= 2259.20) {
        aliquota = 0;
        deducao = 0;
        faixa = "Isento";
    } else if (baseCalculo <= 2826.65) {
        aliquota = 0.075;
        deducao = 169.44;
        faixa = "7,5%";
    } else if (baseCalculo <= 3751.05) {
        aliquota = 0.15;
        deducao = 381.44;
        faixa = "15%";
    } else if (baseCalculo <= 4664.68) {
        aliquota = 0.225;
        deducao = 662.77;
        faixa = "22,5%";
    } else {
        aliquota = 0.275;
        deducao = 896.00;
        faixa = "27,5%";
    }

    let irrf = (baseCalculo * aliquota) - deducao;
    if (irrf < 0) irrf = 0;

    let irrfSemDeducao = baseCalculo * aliquota;
    let salarioLiquido = salarioBruto - irrf;

    let html = `
        <h4>üí∞ Resultado do C√°lculo</h4>
        <div class="resultado-item">
            <span>Sal√°rio Bruto:</span>
            <span>R$ ${salarioBruto.toFixed(2)}</span>
        </div>
        <div class="resultado-item">
            <span>Dedu√ß√£o por Dependentes (${dependentes}):</span>
            <span>R$ ${(dependentes * deducaoDependente).toFixed(2)}</span>
        </div>
        <div class="resultado-item">
            <span>Base de C√°lculo:</span>
            <span>R$ ${baseCalculo.toFixed(2)}</span>
        </div>
        <div class="resultado-item">
            <span>Faixa de Tributa√ß√£o:</span>
            <span>${faixa}</span>
        </div>
        <div class="resultado-item">
            <span>Al√≠quota Aplicada:</span>
            <span>${(aliquota * 100).toFixed(1)}%</span>
        </div>
        <div class="resultado-item">
            <span>Parcela a Deduzir:</span>
            <span>R$ ${deducao.toFixed(2)}</span>
        </div>
        <div class="resultado-item" style="background:rgba(233,69,96,0.2); padding:15px; border-radius:10px; margin-top:10px;">
            <span>üí≥ IRRF a Recolher:</span>
            <span style="color:#e94560; font-size:1.3rem;">R$ ${irrf.toFixed(2)}</span>
        </div>
        <div class="resultado-item" style="background:rgba(0,255,136,0.1); padding:15px; border-radius:10px;">
            <span>‚úÖ Sal√°rio L√≠quido (ap√≥s IR):</span>
            <span style="color:#00ff88; font-size:1.3rem;">R$ ${salarioLiquido.toFixed(2)}</span>
        </div>
    `;

    resultadoDiv.innerHTML = html;
}

// ============================================
// JUROS COMPOSTOS
// ============================================
function montanteSimples(capital, taxa, tempo) {
    return capital * Math.pow(1 + taxa, tempo);
}

function montanteComAporte(capital, aporte, taxa, tempo) {
    if (taxa === 0) return capital + aporte * tempo;
    const parte1 = capital * Math.pow(1 + taxa, tempo);
    const parte2 = aporte * ((Math.pow(1 + taxa, tempo) - 1) / taxa);
    return parte1 + parte2;
}

function gerarGraficoASCII(curva1, curva2, label1, label2) {
    const altura = 15;
    const largura = curva1.length;
    const maxValor = Math.max(...curva1, ...curva2);
    const minValor = Math.min(...curva1, ...curva2);
    const range = maxValor - minValor;

    let grafico = "";
    
    for (let linha = 0; linha < altura; linha++) {
        const limite = maxValor - (range * linha / (altura - 1));
        let row = "";
        
        for (let i = 0; i < largura; i++) {
            const v1 = curva1[i];
            const v2 = curva2[i];
            
            const check1 = v1 >= limite - (range / altura / 2);
            const check2 = v2 >= limite - (range / altura / 2);
            
            if (check1 && check2) row += "‚óÜ";
            else if (check1) row += "‚óè";
            else if (check2) row += "‚óã";
            else row += "¬∑";
        }
        
        const valorLabel = limite >= 1000 ? (limite/1000).toFixed(1) + "k" : limite.toFixed(0);
        grafico += valorLabel.padStart(6) + " ‚îÇ" + row + "\n";
    }
    
    grafico += "       ‚îî" + "‚îÄ".repeat(largura) + "\n";
    grafico += "        " + "0".padEnd(Math.floor(largura/2)) + "tempo‚Üí".padStart(Math.ceil(largura/2));
    
    return grafico;
}

function calcularJuros() {
    let capital = parseFloat(document.getElementById("juros-capital").value);
    let aporte = parseFloat(document.getElementById("juros-aporte").value);
    let taxaPercent = parseFloat(document.getElementById("juros-taxa").value);
    let ipcaPercent = parseFloat(document.getElementById("juros-ipca").value);
    let tempo = parseInt(document.getElementById("juros-tempo").value);

    let taxa = taxaPercent / 100;
    let taxaIPCA = ipcaPercent / 100;

    let resultadoDiv = document.getElementById("resultado-juros");
    resultadoDiv.style.display = "block";

    // C√°lculos sem aporte
    const montanteSemAporte = montanteSimples(capital, taxa, tempo);
    const montanteIPCASemAporte = montanteSimples(capital, taxaIPCA, tempo);
    const diferencaSemAporte = montanteSemAporte - montanteIPCASemAporte;
    const rendimentoSemAporte = montanteSemAporte - capital;

    // C√°lculos com aporte
    const montanteComAporteVal = montanteComAporte(capital, aporte, taxa, tempo);
    const montanteIPCAComAporte = montanteComAporte(capital, aporte, taxaIPCA, tempo);
    const diferencaComAporte = montanteComAporteVal - montanteIPCAComAporte;
    const totalInvestido = capital + (aporte * tempo);
    const rendimentoComAporte = montanteComAporteVal - totalInvestido;

    // Gerar curvas para gr√°fico
    const pontos = Math.max(12, tempo);
    const curvaAplicacao = [];
    const curvaIPCA = [];
    
    for (let t = 0; t <= tempo; t += tempo / pontos) {
        curvaAplicacao.push(montanteComAporte(capital, aporte, taxa, t));
        curvaIPCA.push(montanteComAporte(capital, aporte, taxaIPCA, t));
    }

    const grafico = gerarGraficoASCII(curvaAplicacao, curvaIPCA, "Aplica√ß√£o", "IPCA");

    let html = `
        <h4>üìä An√°lise SEM Aportes Mensais</h4>
        <div class="resultado-item">
            <span>Capital Inicial:</span>
            <span>R$ ${capital.toFixed(2)}</span>
        </div>
        <div class="resultado-item">
            <span>Montante Final (${taxaPercent}% a.m.):</span>
            <span>R$ ${montanteSemAporte.toFixed(2)}</span>
        </div>
        <div class="resultado-item">
            <span>Se aplicado apenas no IPCA (${ipcaPercent}% a.m.):</span>
            <span>R$ ${montanteIPCASemAporte.toFixed(2)}</span>
        </div>
        <div class="resultado-item" style="background:rgba(0,255,136,0.1); padding:15px; border-radius:10px;">
            <span>üíµ Rendimento Real:</span>
            <span style="color:#00ff88;">R$ ${rendimentoSemAporte.toFixed(2)}</span>
        </div>
        <div class="resultado-item">
            <span>Ganho acima da infla√ß√£o:</span>
            <span style="color:#00d9ff;">R$ ${diferencaSemAporte.toFixed(2)}</span>
        </div>

        <h4 style="margin-top:30px;">üìà An√°lise COM Aportes de R$ ${aporte.toFixed(2)}/m√™s</h4>
        <div class="resultado-item">
            <span>Total Investido (capital + aportes):</span>
            <span>R$ ${totalInvestido.toFixed(2)}</span>
        </div>
        <div class="resultado-item">
            <span>Montante Final (${taxaPercent}% a.m.):</span>
            <span>R$ ${montanteComAporteVal.toFixed(2)}</span>
        </div>
        <div class="resultado-item">
            <span>Se aplicado apenas no IPCA (${ipcaPercent}% a.m.):</span>
            <span>R$ ${montanteIPCAComAporte.toFixed(2)}</span>
        </div>
        <div class="resultado-item" style="background:rgba(0,255,136,0.1); padding:15px; border-radius:10px;">
            <span>üíµ Rendimento Total:</span>
            <span style="color:#00ff88; font-size:1.2rem;">R$ ${rendimentoComAporte.toFixed(2)}</span>
        </div>
        <div class="resultado-item">
            <span>Ganho acima da infla√ß√£o:</span>
            <span style="color:#00d9ff;">R$ ${diferencaComAporte.toFixed(2)}</span>
        </div>

        <div class="grafico-container">
            <h4>üìâ Evolu√ß√£o do Investimento</h4>
            <pre class="grafico-ascii">${grafico}</pre>
            <div class="legenda">
                <div class="legenda-item">
                    <span style="color:#00ff88; font-size:1.3rem;">‚óè</span>
                    <span>Aplica√ß√£o (${taxaPercent}% a.m.)</span>
                </div>
                <div class="legenda-item">
                    <span style="color:#aaa; font-size:1.3rem;">‚óã</span>
                    <span>IPCA (${ipcaPercent}% a.m.)</span>
                </div>
                <div class="legenda-item">
                    <span style="color:#e94560; font-size:1.3rem;">‚óÜ</span>
                    <span>Ambas as curvas</span>
                </div>
            </div>
        </div>
    `;

    resultadoDiv.innerHTML = html;
}
</script>

</body>
</html>
